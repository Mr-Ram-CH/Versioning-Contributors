<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to the Snake Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: rgb(106, 177, 124); /* Updated background color */
        }

        .container {
            text-align: center;
        }

        canvas {
            border: 2px solid #5d53eb;
        }

        #score {
            color: #cddb0d;
            margin-top: 10px;
        }

        #startButton {
            background-color: #4CAF50;
            border: none;
            color: rgb(25, 168, 240);
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-top: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        <div id="score">Score: 0</div>
        <button id="startButton">Start Game</button>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const scoreDisplay = document.getElementById('score');
            const startButton = document.getElementById('startButton');

            const gridSize = 20;
            const tileCount = canvas.width / gridSize;
            let snake = [{x: 10, y: 10}];
            let food = {x: 15, y: 15};
            let dx = 0;
            let dy = 0;
            let score = 0;
            let gameRunning = false;

            startButton.addEventListener('click', startGame);

            function startGame() {
                if (!gameRunning) {
                    gameRunning = true;
                    snake = [{x: 10, y: 10}];
                    score = 0;
                    dx = 0;
                    dy = 0;
                    generateFood();
                    main();
                }
            }

            function main() {
                if (!gameRunning) return;

                setTimeout(function onTick() {
                    clearCanvas();
                    moveSnake();
                    drawSnake();
                    drawFood();
                    if (checkCollision()) {
                        gameOver();
                        return;
                    }
                    if (checkFoodCollision()) {
                        eatFood();
                        generateFood();
                    }
                    scoreDisplay.textContent = 'Score: ' + score;
                    main();
                }, 100);
            }

            function clearCanvas() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }

            function drawSnake() {
                snake.forEach(drawSnakePart);
            }

            function drawSnakePart(snakePart) {
                ctx.fillStyle = '#888';
                ctx.fillRect(snakePart.x * gridSize, snakePart.y * gridSize, gridSize, gridSize);
                ctx.strokeStyle = '#333';
                ctx.strokeRect(snakePart.x * gridSize, snakePart.y * gridSize, gridSize, gridSize);
            }

            function moveSnake() {
                const head = {x: snake[0].x + dx, y: snake[0].y + dy};
                snake.unshift(head);
                if (!checkFoodCollision()) {
                    snake.pop();
                }
            }

            function changeDirection(event) {
                const LEFT_KEY = 37;
                const RIGHT_KEY = 39;
                const UP_KEY = 38;
                const DOWN_KEY = 40;

                const keyPressed = event.keyCode;
                const goingUp = dy === -1;
                const goingDown = dy === 1;
                const goingRight = dx === 1;
                const goingLeft = dx === -1;

                if (keyPressed === LEFT_KEY && !goingRight) {
                    dx = -1;
                    dy = 0;
                }
                if (keyPressed === UP_KEY && !goingDown) {
                    dx = 0;
                    dy = -1;
                }
                if (keyPressed === RIGHT_KEY && !goingLeft) {
                    dx = 1;
                    dy = 0;
                }
                if (keyPressed === DOWN_KEY && !goingUp) {
                    dx = 0;
                    dy = 1;
                }
            }

            function checkCollision() {
                for (let i = 1; i < snake.length; i++) {
                    if (snake[i].x === snake[0].x && snake[i].y === snake[0].y) {
                        return true;
                    }
                }
                const hitLeftWall = snake[0].x < 0;
                const hitRightWall = snake[0].x > tileCount - 1;
                const hitTopWall = snake[0].y < 0;
                const hitBottomWall = snake[0].y > tileCount - 1;
                return hitLeftWall || hitRightWall || hitTopWall || hitBottomWall;
            }

            function drawFood() {
                ctx.fillStyle = '#0F0';
                ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);
            }

            function generateFood() {
                food.x = Math.floor(Math.random() * tileCount);
                food.y = Math.floor(Math.random() * tileCount);
                snake.forEach(function isFoodOnSnake(part) {
                    const foodIsOnSnake = part.x === food.x && part.y === food.y;
                    if (foodIsOnSnake) {
                        generateFood();
                    }
                });
            }

            function checkFoodCollision() {
                return snake[0].x === food.x && snake[0].y === food.y;
            }

            function eatFood() {
                score += 10;
            }

            function gameOver() {
                gameRunning = false;
                alert('Game Over! Your score: ' + score);
            }

            document.addEventListener('keydown', changeDirection);
        });
    </script>
</body>
</html>
